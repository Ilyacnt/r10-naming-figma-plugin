<div class="tabs-container">
    <div id="tabs" class="tabs">
        <input value="default" type="radio" id="radio-1" name="tabs" checked />
        <label class="tab" for="radio-1">Default</label>
        <input value="ga" type="radio" id="radio-2" name="tabs" />
        <label class="tab" for="radio-2">GA</label>
        <input value="settings" type="radio" id="radio-3" name="tabs" />
        <label class="tab" for="radio-3">Settings</label>
        <span class="glider"></span>
    </div>
</div>

<div class="main-container default-container" id="default-container">
    <div class="select">
        <div class="select-label">Label:</div>
        <div class="select-container">
            <div class="select-head set-focus" id="select-head" tabindex=1>
                <input class="select-input set-focus" id="search-input" maxlength=256 type="text"
                    placeholder="Search...">
                <span class="select-placeholder set-focus" id="search-placeholder">Select</span>

                <svg class='set-focus' width="16" height="10" viewBox="0 0 16 10" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path class='set-focus' d="M7.79187 7.83081L2.58374 1.16943H13L7.79187 7.83081Z" fill="white"
                        stroke="white" stroke-width="2" />
                </svg>
            </div>
            <div class="select-body" id="select-body">

            </div>
        </div>
    </div>
    <div class="input">
        <label for="test">Label:</label>
        <input id="test" type="text" placeholder="Placeholder">
    </div>
</div>
<div class="main-container ga-container" id="ga-container">
    ga-container
</div>
<div class="main-container settings-container" id="settings-container">
    settings-container
</div>



<script>
    let defaultContainer = document.getElementById('default-container')
    let gaContainer = document.getElementById('ga-container')
    let settingsContainer = document.getElementById('settings-container')

    let tabs = document.getElementsByName('tabs')
    const tabChange = e => {
        defaultContainer.style.display = 'none';
        gaContainer.style.display = 'none';
        settingsContainer.style.display = 'none'
        switch (e.target.value) {
            case 'default':
                defaultContainer.style.display = 'flex'
                break;
            case 'ga':
                gaContainer.style.display = 'flex'
                break;
            case 'settings':
                settingsContainer.style.display = 'flex'
                break;

            default:
                break;
        }
    }

    tabs.forEach(tab => tab.onchange = tabChange)


    // Search input

    const selectHead = document.getElementById("select-head")
    const searchPlaceholder = document.getElementById("search-placeholder")
    const searchInput = document.getElementById("search-input")
    const selectBody = document.getElementById("select-body")



    let isSelect = false

    const searchToggle = e => {
        if (e.target.classList.contains("set-focus") && searchPlaceholder.style.display !== 'none') {
            searchPlaceholder.style.display = 'none'
            searchInput.style.display = 'initial'
            searchInput.focus()
            selectBody.style.display = "initial"
        } else if (!e.target.classList.contains("set-focus")) {
            searchPlaceholder.style.display = 'initial'
            searchInput.style.display = 'none'
            selectBody.style.display = "none"
        }
    }

    document.addEventListener('click', searchToggle)
    selectHead.addEventListener('click', searchToggle)


    // const sheetId = '1BIay3Xqs1P2xGhX5kBEweAFTQHBivTa4to6_4Vpvu2Y';
    // const base = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?`;
    // const sheetName = 'user-data';
    // const query = encodeURIComponent('Select *')
    // const url = `${base}&sheet=${sheetName}&tq=${query}`
    const offersData = ['HUi']

    // const initData = () => {
    //     fetch(url)
    //         .then(res => res.text())
    //         .then(rep => {
    //             console.log(rep)
    //             const jsonData = JSON.parse(rep.substring(47).slice(0, -2));
    //             jsonData.table.rows.forEach(row => {
    //                 offersData.push(row.c[0].v)
    //                 console.log(row.c[0].v)
    //             })
    //         })
    // }
    // document.addEventListener('DOMContentLoaded', initData)
    
    

    offersData.forEach(offer => {
        let selectOptionNode = document.createElement('DIV')
        selectOptionNode.className = 'select-option'
        selectOptionNode.innerText = offer
        selectBody.appendChild(selectOptionNode)
    })


    const optionHandler = e => {
        searchPlaceholder.innerText = e.target.innerText
    }

    const selectOptions = document.getElementsByClassName('select-option')
    Array.from(selectOptions).forEach(option => option.addEventListener('click', optionHandler))


    const searchHandler = e => {
        let searchString = e.target.value.toLowerCase()

        Array.from(selectOptions).forEach(el => {
            let isVisible = el.innerText.toLowerCase().includes(searchString)
            el.classList.toggle('hidden', !isVisible)
        })


    }

    searchInput.addEventListener('input', searchHandler)






    // /Search input
</script>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400&display=swap');

    :root {
        --primary-color: #FFFFFF;
        --secondary-color: #0C8CE9;
        --tertiary-color: #444444;
        --background-color: #29292A;
        --tab-width: 120px;
        --tab-height: 25px;
    }

    *,
    *:after,
    *:before {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html {
        font-family: 'Rubik', sans-serif;
        background: var(--background-color);
        color: var(--primary-color);
        display: flex;
        flex-direction: column;
        padding: 20px;
    }

    .tabs-container {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .tabs {
        display: flex;
        position: relative;
        background-color: var(--background-color);
        padding: 0.5rem;
        border-radius: 99px;
        border: 2px solid white;
        margin-bottom: 20px;
        transition: all .2s;
    }

    .tabs:hover {
        background: var(--tertiary-color);
    }

    .tabs * {
        z-index: 2;
    }

    input[type="radio"] {
        display: none;
    }

    .tab {
        display: flex;
        align-items: center;
        justify-content: center;
        height: var(--tab-height);
        width: var(--tab-width);
        font-weight: 600;
        border-radius: 99px;
        cursor: pointer;
        transition: color 0.15s ease-in;
    }

    input[type="radio"]:checked+label {
        color: var(--primary-color);
    }

    input[id="radio-1"]:checked~.glider {
        transform: translateX(0);
    }

    input[id="radio-2"]:checked~.glider {
        transform: translateX(100%);
    }

    input[id="radio-3"]:checked~.glider {
        transform: translateX(200%);
    }

    .glider {
        position: absolute;
        display: flex;
        height: var(--tab-height);
        width: var(--tab-width);
        background-color: var(--secondary-color);
        z-index: 1;
        border-radius: 99px;
        transition: 0.25s ease-out;
    }

    .main-container {
        display: flex;
        flex-direction: column;
        width: 100%;
        /* manual handle */
        height: 400px;
        /* border: 1px solid rgb(114, 70, 70); */
        gap: 10px;
    }

    .ga-container {
        display: none;
    }

    .settings-container {
        display: none;
    }

    /* input component */

    .input {
        width: 100%;
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .input input {
        background-color: var(--background-color);
        border: 2px solid var(--tertiary-color);
        color: var(--primary-color);
        box-shadow: inset 0px 3px 9px rgba(0, 0, 0, 0.5);
        font-size: 1rem;
        font-weight: 500;
        border-radius: 5px;
        padding: 10px 10px;
        width: 100%;
        transition: all .2s;
    }

    .input input::placeholder {
        font-style: italic;
        font-weight: 400;
    }

    .input input:hover {
        background-color: #444444;
    }

    .input input:active {
        border: 2px solid var(--secondary-color);
    }

    .input input:focus {
        border: 2px solid var(--secondary-color);
        outline: none;
        box-shadow: inset 0px 4px 15px rgba(31, 156, 240, 0.1);
    }

    .input label {
        font-style: 1rem;
        font-weight: 600;
    }

    /* /input component */

    /* select component */

    .select {
        display: flex;
        align-items: center;
        gap: 20px;
        width: 100%;
        user-select: none;
    }

    .select-label {
        font-weight: 600;
    }

    .select-container {
        width: inherit;
    }

    .select-head {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        background-color: var(--background-color);
        border: 2px solid var(--tertiary-color);
        color: var(--primary-color);
        box-shadow: inset 0px 3px 9px rgba(0, 0, 0, 0.5);
        font-size: 1rem;
        font-weight: 500;
        border-radius: 5px;
        padding: 10px;
        width: 100%;
        transition: all .2s;
    }

    .select-head:hover {
        background-color: #444444;
    }

    .select-head:focus {
        border: 2px solid var(--secondary-color);
        outline: none;
        box-shadow: inset 0px 4px 15px rgba(31, 156, 240, 0.1);
    }

    .select-input {
        color: var(--primary-color);
        background: none;
        outline: none;
        border: none;
        font-size: 1rem;
        font-weight: 500;
        display: none;
        width: 100%;
    }

    .select-body {
        z-index: 10;
        position: absolute;
        padding: 10px 0;
        border-bottom: 2px solid var(--tertiary-color);
        border-left: 2px solid var(--tertiary-color);
        border-right: 2px solid var(--tertiary-color);
        background: var(--background-color);
        border-radius: 0 0 5 5px;
        width: 463px;
        max-height: 200px;
        overflow-y: scroll;
        display: none;
    }

    .select-body::-webkit-scrollbar {
        margin-top: 2px;
        width: 10px;
        border-radius: 5px;
    }

    .select-body::-webkit-scrollbar-track {
        background-color: var(--primary-color);
        border-radius: 5px;
    }

    .select-body::-webkit-scrollbar-thumb {
        background-color: var(--secondary-color);
        box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
        border-radius: 5px;
    }

    .select-option {
        padding: 10px 10px;
        transition: all .2s;
    }

    .select-option:hover {
        background: var(--tertiary-color);
    }

    .select-option:active {
        background: var(--secondary-color);
    }

    .hidden {
        display: none;
    }

    /* /select component */
</style>