
<div class="header-container">
  <h1>Info</h1>
  <h1 id="aboutButton">About</h1>
</div>

<div class="about-container" id="aboutContainer">
  <p>Version 1.0.2</p>
  <p>Any questions? Welcome to Telegram.</p>
  <a href="https://t.me/oneheadache" target=”_blank”>@oneheadache</a>
</div>

<div class="input-container">
  <p class="input-container--label">Designer color:</p>
  <input class="input-container--input" id="designerColor" type="text" placeholder="Cyan">
</div>
<div class="input-container">
  <p class="input-container--label">Offer:</p>
  <input class="input-container--input" id="offer" type="text" placeholder="GA">
</div>
<div class="input-container">
  <p class="input-container--label">Buyer:</p>
  <input class="input-container--input" id="buyer" type="text" placeholder="ES">
</div>

<h1>Sequence</h1>

<div class="sequence-container">
  <div class="input-sequence-container">
    <p class="input-sequence-container--label">From:</p>
    <input class="input-sequence-container--input" id="sequenceFrom" type="text" placeholder="1" value="1">
  </div>
  <div class="select-sequence-container">
    <p class="select-sequence-container--label">Order by:</p>
    <select id="orderBy" class="select-sequence-container--select">
      <option value="layerPanel">Layer Panel</option>
      <option value="leftToRight">Left to right, top to bottom</option>
      <option value="topToBottom">Top to bottom, left to right</option>
  </select> 
  </div>
</div>


<div class="logo-buttons-container">
  <svg width="96" height="22" viewBox="0 0 96 22" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2.45481 20.58V12.8401C5.74048 13.4667 10.1969 14.0564 10.1969 18.3317V20.58H12.6139V18.2211C12.6139 14.6092 10.0459 12.6927 6.08038 12.0293C9.47938 12.0293 12.8783 11.2553 12.8783 7.34854C12.8783 3.07321 10.1214 1.89381 5.40058 1.89381H0L0 20.58H2.45481ZM2.45481 10.8499V3.8472C2.83248 3.8472 4.79632 3.81034 5.13622 3.81034C7.81764 3.8472 10.348 4.06833 10.348 6.90626V7.75396C10.348 10.8499 6.87347 10.6287 2.45481 10.8499ZM20.8093 20.9485C24.6614 20.9485 26.8897 19.2531 26.8897 16.3046V12.2873C26.8897 9.59676 25.2279 6.90626 20.9981 6.90626C17.3347 6.90626 14.9933 8.60166 14.9933 12.2135V16.3046C14.9933 18.9582 17.0704 20.9485 20.8093 20.9485ZM20.9981 19.0688C18.9587 19.0688 17.5236 17.9631 17.5236 16.0466V12.5821C17.5236 9.8916 18.8076 8.8228 20.9981 8.8228H21.4135C23.4907 8.8228 24.2837 10.5182 24.397 12.103V16.0098C24.397 18.0369 23.1508 19.0688 20.9981 19.0688ZM34.7073 20.9485C36.9732 20.9485 38.5972 20.322 39.6169 19.5111C39.5036 19.3637 38.4462 18.3317 38.2196 18.1105C37.0865 18.8477 36.2557 19.032 34.8206 19.032C31.9881 19.032 31.3838 16.194 31.3838 13.8721L31.3845 13.712C31.3973 12.2697 31.6325 8.8228 35.0849 8.8228C36.2179 8.8228 37.0487 9.08082 38.2196 9.74418C38.4839 9.52309 39.6169 8.38052 39.6169 8.38052C38.2573 7.3854 36.5578 6.97998 35.0094 6.97998C34.6695 6.97998 34.3674 6.97998 34.0652 7.01684C31.0817 7.34854 29.0801 9.26508 28.9668 12.4347V13.7247C28.9668 17.3734 30.0242 20.9485 34.7073 20.9485ZM43.3936 20.58V14.8304H43.809C45.5084 14.8304 48.4542 15.6781 48.4542 18.774V20.58H50.8713V18.516C50.8713 15.1989 47.9632 13.6141 45.4329 13.393C48.6809 12.4347 50.0404 10.6656 51.2867 7.68025C50.8335 7.45911 50.1915 7.20112 49.134 6.7957C47.9255 9.52309 46.3771 11.7344 43.3936 12.5085V0.935547H40.9387V20.58H43.3936ZM59.2554 20.9485C61.5592 20.9485 63.1453 20.322 64.2405 18.2949C63.9006 18.1105 63.1831 17.5209 62.6921 17.1892C61.748 18.5529 61.1437 19.032 59.5953 19.032C57.4048 19.032 55.9697 17.3366 55.9697 14.9409H59.9729C63.1453 14.9409 64.807 13.3193 64.807 11.5133C64.807 8.74909 62.3145 6.86941 59.4442 6.86941C55.5921 6.86941 53.4771 9.52309 53.4771 13.6878C53.4771 14.0564 53.4771 14.425 53.5149 14.7198C53.7037 17.6683 55.29 20.9485 59.2554 20.9485ZM59.1421 13.2456H55.9697C55.9697 10.3339 56.8383 8.97022 59.4442 8.8228C60.9549 8.8228 62.5411 9.67051 62.5411 11.329C62.5411 12.2873 61.4459 13.2456 59.1421 13.2456ZM72.0582 21.4645C72.4736 20.8748 73.0024 20.1008 73.3045 19.6217C72.1715 18.8108 71.1895 18.2211 71.1895 16.8575V9.19132H73.7199V7.31169H71.1518V0.935547H68.697V7.31169H66.3933V9.19132H68.697V16.7101C68.697 19.0688 69.9432 20.4326 72.0582 21.4645Z" fill="white"/>
    <path d="M81.4223 20.0456V2.31764C79.3071 2.31764 76.7389 2.57564 74.624 4.23418V4.30789C75.0394 4.86073 75.3793 5.41358 75.8703 5.89271C76.0214 5.78214 76.248 5.67157 76.4368 5.59786H76.4745C76.9656 5.30301 78.0986 4.93444 79.0049 4.78702V20.0456H81.4223ZM89.8441 20.3772C93.1675 20.3772 94.867 18.8661 95.9622 15.6965C95.9622 15.5122 96 15.2174 96 15.0699V7.07211C95.9622 6.96155 95.8867 6.33498 95.7356 5.89271C94.867 3.46019 92.4877 2.0228 89.9574 2.0228H88.8622C87.8803 2.20708 87.0872 2.50193 86.2941 3.05477C86.0298 3.05477 85.1234 4.04989 84.859 4.45531C83.8771 5.85586 83.7638 7.10897 83.7638 8.62008V9.35718C83.7638 10.7577 83.8016 13.8536 83.8016 15.2542C83.8016 17.2076 85.9542 20.3772 89.1643 20.3772H89.8441ZM90.5617 18.4238H89.9197C89.1266 18.4238 88.7489 18.387 88.2202 18.0553L88.1824 18.0184C86.7473 17.2076 86.3319 15.6965 86.3319 15.2174C86.303 15.0792 86.2965 14.9617 86.2941 14.8338V7.44067C86.4452 5.63471 87.9181 3.97618 89.8819 3.97618H90.4484C90.3728 3.93932 92.6388 4.34474 93.3941 6.62983C93.4319 6.77726 93.4696 7.03526 93.4696 7.14582V15.0699C93.4696 16.5073 92.1856 17.9079 90.5617 18.4238Z" fill="#E02957"/>
    </svg>
    
  <div class="buttons-container">
    <button id="cancelButton" class="button button-secondary">Cancel</button>
    <button id="actionButton" class="button button-primary">Rename Selected Frames</button>
  </div>
</div>

<script>
  // Form UI-elements with data
  const designerColor = document.getElementById('designerColor')
  const offer = document.getElementById('offer')
  const buyer = document.getElementById('buyer')
  const sequenceFrom = document.getElementById('sequenceFrom')
  const orderBy = document.getElementById('orderBy')
  // Buttons
  const cancelButton = document.getElementById('cancelButton')
  const actionButton = document.getElementById('actionButton')
  // About
  const aboutButton = document.getElementById('aboutButton')
  const aboutContainer = document.getElementById('aboutContainer')
  let isAboutContainer = false

  const hideAboutContainer = () => {
    aboutContainer.style.display = 'none'
  }

  const showAboutContainer = () => {
    aboutContainer.style.display = 'initial'
  }

  aboutButton.onclick = () => {
    if (isAboutContainer) {
      hideAboutContainer()
      isAboutContainer = false
      aboutButton.innerText = 'About'
    } else {
      showAboutContainer()
      isAboutContainer = true
      aboutButton.innerText = 'X'
    }
  }


  cancelButton.onclick = () => {
    parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')
  }

  const isFormError = () => {


    if (isNaN(parseInt(sequenceFrom.value))) {
      sequenceFrom.classList.add('input-error')
      return true
    }
    sequenceFrom.classList.remove('input-error')
    return false
  }

  
  actionButton.onclick = () => {
    if (!isFormError()) {
      
      const formData = { 
        designerColor: designerColor.value,
        offer: offer.value,
        buyer: buyer.value,
        sequenceFrom: sequenceFrom.value,
        orderBy: orderBy.value
      }

      parent.postMessage({ pluginMessage: { type: 'action', formData } }, '*')
    } 

  }


  // This function restore data from last time run plugin
  onmessage = (event) => {
    let lastRunData = event.data.pluginMessage

    designerColor.value = lastRunData.designerColor
    offer.value = lastRunData.offer
    buyer.value = lastRunData.buyer
    orderBy.value = lastRunData.orderBy
  }


</script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');

  html {
    font-family: 'Inter', sans-serif;
    background: #2C2C2C;
    color: #FFFFFF;
    display: flex;
    flex-direction: column;
    padding: 20px;
  }

  .header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 0;
    padding: 0;
  }

  h1 { 
    font-weight: 600;
    font-size: 18px;
    user-select: none;
    text-transform: uppercase;
  }

  #aboutButton {
    text-decoration: underline;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
  }

  #aboutButton:hover {
    color: #0C8CE9;
  }

  .input-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .input-container--label {
    font-weight: 500;
    font-size: 16px;
    color: #b6b6b6;
    user-select: none;
  }

  .input-container--input {
    font-family: 'Inter', sans-serif;
    font-weight: 400;
    color: white;
    font-size: 16px;
    background: #2C2C2C;
    border: 2px solid #444444;
    border-radius: 2px;
    padding: 4px 0;
    padding-left: 7px;
    height: 33px;
    transition: all 0.2s ease-in-out;
  }

  .input-container--input:focus {
    border: 2px solid #0C8CE8;
    box-shadow: inset 0px 4px 15px rgba(31, 156, 240, 0.1);
    outline: none;
  }

  .sequence-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .input-sequence-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 17px;
  }

  .input-sequence-container--label {
    font-weight: 500;
    font-size: 16px;
    color: #b6b6b6;
    user-select: none;
  }

  .input-sequence-container--input {
    font-family: 'Inter', sans-serif;
    font-weight: 400;
    color: white;
    font-size: 16px;
    background: #2C2C2C;
    border: 2px solid #444444;
    border-radius: 2px;
    padding: 4px 0;
    padding-left: 7px;
    height: 33px;
    width: 40px;
    transition: all 0.2s ease-in-out;
  }

  .input-sequence-container--input:focus {
    border: 2px solid #0C8CE8;
    box-shadow: inset 0px 4px 15px rgba(31, 156, 240, 0.1);
    outline: none;
  }

  .input-error {
    border: 2px solid #DE0000 !important;
  }


  .select-sequence-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 17px;
  }

  .select-sequence-container--label {
    font-weight: 500;
    font-size: 16px;
    color: #b6b6b6;
    user-select: none;
  }

  .select-sequence-container--select {
    font-family: 'Inter', sans-serif;
    font-weight: 400;
    color: white;
    font-size: 16px;
    background: #2C2C2C;
    border: 2px solid #444444;
    border-radius: 2px;
    padding: 4px 0;
    padding-left: 7px;
    height: 33px;
    width: 210px;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
  }

  .input-sequence-container--select:focus {
    border: 2px solid #0C8CE8;
    box-shadow: inset 0px 4px 15px rgba(31, 156, 240, 0.1);
    outline: none;
  }
  select:focus {
    border: 2px solid #0C8CE8;
    box-shadow: inset 0px 4px 15px rgba(31, 156, 240, 0.1);
    outline: none;
  }


  .logo-buttons-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 18px;
  }

  .buttons-container {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .button {
    padding: 10px;
    background: none;
    color: #FFFFFF;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.1s ease-in-out;
    outline: none;
  }

  .button:focus {
    outline: 2px solid #0C8CE8;
  }

  .button-primary {
    border: 1px solid #0071C2;
    background: #0C8CE9;
  }

  .button-secondary {
    border: 1px solid #FFFFFF;
  }

  .button-primary:hover {
    background: #0071C2;
  }

  .button-secondary:hover {
    color: #838383;
    border: 1px solid #838383;
  }


  .about-container {
    position: absolute;
    z-index: 10;
    background: #2C2C2C;
    border: 1px solid #444444;
    border-radius: 3px;
    padding: 40px 34px;
    height: 230px;
    width: 350px;
    display: none;
    user-select: none;
  }

  .about-container a {
    color: #0C8CE9;
  }


</style>